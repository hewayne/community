<?php/** * Created by PhpStorm. * User: wayne * Date: 2016/12/30 * Time: 2:12 */namespace frontend\models;use common\models\Reply;use common\models\ReReply;use common\models\User;use yii\base\Model;class ReReplyForm extends Model {    public function saveReReply($post){        $replyId = (int)$post['replyId'];        $content = htmlspecialchars(strip_tags($post['content']), ENT_QUOTES);        $model = new ReReply();        $model->reply_id = $replyId;        $model->content = $content;        $model->user_id = (int)\Yii::$app->user->id;        $model->time = time();        if (!$model->save()){            return false;        }        //更新此回复的【二级回复数量】        $replyModel = Reply::findOne($replyId);        $replyModel->updateCounters(['re_reply_num' => 1]);        //将用户的积分加20        $userModel = User::findOne(\Yii::$app->user->id);        $userModel->updateCounters(['point' => 20]);        return true;    }}